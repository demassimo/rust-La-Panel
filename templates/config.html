<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Rust Panel – Configuration</title>
<style>
:root{
  --bg:#0b0e14; --surface:#0f131a; --panel:#121826; --sunken:#0b1017;
  --text:#e6edf3; --muted:#9aa4ad; --accent:#22d3ee; --accent-2:#7c3aed;
  --good:#22c55e; --bad:#ef4444; --radius:14px; --shadow:0 12px 36px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:radial-gradient(1200px 800px at 20% -20%,rgba(124,58,237,.08),transparent 60%),
             radial-gradient(1000px 700px at 120% 0%,rgba(34,211,238,.06),transparent 60%),
             var(--bg);
 color:var(--text); font:14px/1.5 ui-sans-serif,system-ui,Segoe UI,Roboto,Ubuntu,Arial}
a{color:inherit;text-decoration:none}
.container{max-width:820px;margin:24px auto;padding:0 16px}
.header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:16px}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:36px;height:36px;border-radius:10px;background:
  conic-gradient(from 200deg at 70% 40%, var(--accent), transparent 40%),
  conic-gradient(from 20deg at 30% 60%, var(--accent-2), transparent 55%);
box-shadow:inset 0 0 0 1px rgba(255,255,255,.06), var(--shadow)}
.brand h1{margin:0;font-size:18px;letter-spacing:.3px}
.card{background:linear-gradient(180deg,rgba(255,255,255,.03),transparent 60%),var(--panel);
border:1px solid rgba(255,255,255,.06); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden}
.card .head{padding:16px;border-bottom:1px solid rgba(255,255,255,.06);font-weight:600}
.card .body{padding:20px;display:flex;flex-direction:column;gap:16px}
.form-row{display:flex;flex-direction:column;gap:6px}
.label{font-size:12px;color:var(--muted);letter-spacing:.2px;text-transform:uppercase}
.input{width:100%;background:#0d121b;border:1px solid rgba(255,255,255,.08);color:#e6edf3;border-radius:10px;padding:10px 12px;font-size:14px}
.checkbox{display:flex;align-items:center;gap:12px;padding:12px 14px;background:#0d121b;border:1px solid rgba(255,255,255,.08);border-radius:12px}
.checkbox input{appearance:none;width:22px;height:22px;border-radius:6px;background:#111827;border:1px solid rgba(255,255,255,.12);display:grid;place-items:center;cursor:pointer;transition:background .2s ease,border-color .2s ease}
.checkbox input::after{content:"\2713";font-size:16px;color:#0f172a;transform:scale(0);transition:transform .18s ease}
.checkbox input:checked{background:linear-gradient(180deg,#22d3ee,#0ea5e9);border-color:rgba(34,211,238,.6)}
.checkbox input:checked::after{transform:scale(1)}
.checkbox .text{font-size:13px;color:#d1d9e6}
.checkbox .text span{display:block;font-size:12px;color:var(--muted);margin-top:2px}
.actions{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:4px}
.btn{appearance:none;border:0;border-radius:12px;padding:11px 18px;background:linear-gradient(180deg,#60a5fa,#2563eb);color:#e8eef5;cursor:pointer;font-weight:600}
.btn.ghost{background:#111827;border:1px solid rgba(255,255,255,.08);color:#cbd5e1}
.alert{padding:12px 14px;border-radius:12px;border:1px solid transparent;font-size:13px}
.alert.ok{border-color:rgba(34,197,94,.35);background:rgba(34,197,94,.12);color:#bbf7d0}
.alert.err{border-color:rgba(239,68,68,.4);background:rgba(239,68,68,.12);color:#fecaca}
.small{color:var(--muted);font-size:12px}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="brand">
      <div class="logo"></div>
      <h1>Rust Panel</h1>
    </div>
    <div class="actions" style="margin:0">
      <a href="{{ url_for('index') }}" class="btn ghost">← Back to dashboard</a>
    </div>
  </div>

  <section class="card">
    <div class="head">Server configuration</div>
    <div class="body">
      {% if message %}
        <div class="alert ok">{{ message }}</div>
      {% elif error %}
        <div class="alert err">{{ error }}</div>
      {% endif %}

      <form method="post" class="form" style="display:flex;flex-direction:column;gap:16px">
        <div class="form-row">
          <label class="label" for="service">Systemd service name</label>
          <input id="service" name="service" class="input" value="{{ config.service }}" required>
        </div>
        <div class="form-row" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px">
          <div>
            <label class="label" for="steam_user">Steam user</label>
            <input id="steam_user" name="steam_user" class="input" value="{{ config.steam_user }}" required>
          </div>
          <div>
            <label class="label" for="steam_home">Steam home directory</label>
            <input id="steam_home" name="steam_home" class="input" value="{{ config.steam_home }}" required>
          </div>
        </div>
        <div class="form-row">
          <label class="label" for="steamcmd">SteamCMD path</label>
          <input id="steamcmd" name="steamcmd" class="input" value="{{ config.steamcmd }}" required>
        </div>
        <div class="form-row">
          <label class="label" for="rust_dir">Rust server directory</label>
          <input id="rust_dir" name="rust_dir" class="input" value="{{ config.rust_dir }}" required>
        </div>
        <div class="form-row">
          <label class="label" for="file_root">File manager root</label>
          <input id="file_root" name="file_root" class="input" value="{{ config.file_root }}" required>
          <span class="small">Files outside of this path remain hidden from the panel.</span>
        </div>
        <label class="checkbox">
          <input type="checkbox" name="auto_download_rust_with_oxide" {% if config.auto_download_rust_with_oxide %}checked{% endif %}>
          <div class="text">
            Auto-download Rust before running the Oxide/uMod installer
            <span>This mirrors the toggle on the main dashboard.</span>
          </div>
        </label>
        <div class="actions">
          <span class="small">Changes are stored in {{ config_path }}</span>
          <button type="submit" class="btn">Save configuration</button>
        </div>
      </form>
    </div>
  </section>
</div>
</body>
</html>
